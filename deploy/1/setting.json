{
    "meta": {
        "hostName": "",
        "admin": "",
        "defaultHosting": "qa.winesoft.co.kr"
    },
    "env": {
        "network": {
            "passiveSockets": {
                "listenIps": [
                    "0.0.0.0"
                ],
                "maxCount": 80000,
                "reopenRatio": 75
            },
            "https": {
                "frontEnd": {
                    "enableAES-NI": true,
                    "enableSni": false
                }
            },
            "http2": {
                "enable": false,
                "keepAliveSec": 10,
                "concurrentStreamMaxCount": 10
            }
        },
        "rt": {
            "localCacheStorage": {
                "cleanup": {
                    "time": "02:00",
                    "age": 0,
                    "emptyDir": "delete",
                    "fileCount": 0
                }
            },
            "properties": {
                "writeCountSmallFile": 0,
                "enableEmergencyMode": false,
                "memoryRatio": 100,
                "memoryRatioFree": 40,
                "memoryRatioContents": 50,
                "enableSyncStale": true
            }
        },
        "log": {
            "info": {
                "enable": true,
                "rolling": {
                    "size": 1
                },
                "retention": 5,
                "compression": false
            },
            "deny": {
                "enable": true,
                "rolling": {
                    "size": 1
                },
                "retention": 5,
                "compression": false
            },
            "originError": {
                "enable": true,
                "rolling": {
                    "size": 5
                },
                "retention": 5,
                "warning": false,
                "compression": false
            }
        }
    },
    "functions": {
        "network": {
            "cache": {
                "ttl": {
                    "policies": {
                        "priority": [
                            "cc_nocache",
                            "custom",
                            "cc_maxage",
                            "rescode"
                        ],
                        "originBusy": 3,
                        "extendBy4xx": false,
                        "extendBy5xx": true,
                        "unvalidatableObjectResCode": 0
                    },
                    "resCode": {
                        "noCache": {
                            "sec": 5,
                            "ratio": 0,
                            "max": 5,
                            "maxAge": 0
                        },
                        "res2xx": {
                            "sec": 1800,
                            "ratio": 20,
                            "max": 86400
                        },
                        "res3xx": {
                            "sec": 300
                        },
                        "res4xx": {
                            "sec": 30
                        },
                        "res5xx": {
                            "sec": 30
                        },
                        "onError": {
                            "connectTimeout": 3,
                            "receiveTimeout": 3
                        }
                    }
                },
                "cachingKey": {
                    "case": {
                        "enable": true
                    },
                    "queryString": {
                        "enable": true
                    },
                    "acceptEncoding": {
                        "enable": true
                    },
                    "postMethod": {
                        "enable": false,
                        "bodyContentLengthMax": 102400,
                        "bodySensitive": true
                    }
                },
                "purge": {
                    "queryStringCollective": false,
                    "noCacheRequestExpire": false,
                    "refreshExpired": true,
                    "purge2Expire": "NONE",
                    "rootPurgeExpire": "all",
                    "rootHardPurge": true,
                    "resCodeNoCtrlTarget": 200
                }
            },
            "http": {
                "frontEnd": {
                    "headers": {
                        "lastModified": {
                            "rule": "exact"
                        },
                        "via": {
                            "enable": true
                        },
                        "expires": {
                            "enable": false,
                            "base": "Access"
                        },
                        "etag": {
                            "enable": true
                        },
                        "age": {
                            "enable": false
                        },
                        "ifRange": {
                            "enable": false,
                            "purge": false
                        },
                        "server": {
                            "enable": true
                        },
                        "connection": {
                            "directive": "keep-alive"
                        },
                        "keepAlive": {
                            "enable": true,
                            "max": 0
                        },
                        "modify": {
                            "enable": false,
                            "matchFirstOnly": false
                        },
                        "cacheOriginal": {
                            "enable": false,
                            "standard": false
                        }
                    },
                    "bypass": {
                        "postMethod": {
                            "enable": true,
                            "enableBackendAffinity": true,
                            "enableSticky": true
                        },
                        "getMethod": {
                            "enable": false,
                            "enableBackendAffinity": true,
                            "enableSticky": true
                        },
                        "putMethod": {
                            "enable": false,
                            "enableBackendAffinity": true,
                            "enableSticky": true
                        },
                        "session": {
                            "connectTimeout": 5,
                            "receiveTimeout": 300
                        }
                    },
                    "session": {
                        "keepAliveSec": 10
                    },
                    "accessControl": {
                        "enable": false,
                        "mode": "Allow",
                        "denialCode": 401
                    },
                    "compression": {
                        "enable": false,
                        "minSrcSize": 2,
                        "maxSrcSize": 2048
                    },
                    "customErrorPage": {
                        "resCode": 0
                    }
                },
                "backEnd": {
                    "headers": {
                        "modify": {
                            "enable": false,
                            "matchFirstOnly": false
                        },
                        "ifRange": {
                            "enable": false
                        },
                        "xff": {
                            "appendProxy": true
                        },
                        "initByFullRange": {
                            "enable": false
                        },
                        "etag": {
                            "enable": false
                        },
                        "wholeClientRequest": {
                            "enable": false
                        }
                    },
                    "session": {
                        "connectTimeout": 3,
                        "receiveTimeout": 10,
                        "reuseTimeout": 60,
                        "busyCount": 0,
                        "balanceMode": "RoundRobin"
                    },
                    "dns": {
                        "ttlMax": 0,
                        "ttlMin": 0
                    },
                    "health": {
                        "exclusion": {
                            "count": 3
                        },
                        "recovery": {
                            "count": 5,
                            "cycle": 10,
                            "responseCode": 0,
                            "url": "/",
                            "log": true
                        }
                    },
                    "redirectionTrace": {
                        "enable": false
                    },
                    "authorization": {
                        "type": "AWS-S3",
                        "enable": false
                    }
                }
            }
        },
        "contents": {
            "dims": {
                "meta": {
                    "enable": false,
                    "keyword": "",
                    "minSourceSize": 0,
                    "maxSourceSize": 10
                },
                "gif": {
                    "firstFrameOnly": false,
                    "selectMinSize": false
                },
                "quality": {
                    "max": 100,
                    "format": 100
                }
            },
            "denc": {
                "bulk": {
                    "enable": false,
                    "keyword": "",
                    "maxSourceSize": 500,
                    "encrypt": {
                        "algorithm": "RC4"
                    }
                }
            },
            "dvtrim": {
                "upfrontHeader": {
                    "mp4": false,
                    "m4a": false
                },
                "trimming": {
                    "mp4": {
                        "enable": false,
                        "allTracks": false,
                        "startParam": "start",
                        "endParam": "end",
                        "multiParam": "trimming",
                        "maxRatio": 50
                    },
                    "mp3": {
                        "trimming": {
                            "enable": false,
                            "startParam": "start",
                            "endParam": "end"
                        }
                    },
                    "m4a": {
                        "enable": false,
                        "startParam": "start",
                        "endParam": "end",
                        "multiParam": "trimming"
                    }
                }
            },
            "dvhls": {
                "mp4": {
                    "run": {
                        "enable": false,
                        "keyword": "mp4hls",
                        "duration": 10
                    },
                    "playlist": {
                        "indexName": "index.m3u8",
                        "version": 3,
                        "alternates": false,
                        "alternatesName": "playlist.m3u8",
                        "sequence": 0
                    }
                },
                "mp3": {
                    "meta": {
                        "enable": false,
                        "keyword": "mp3hls",
                        "segmentType": "ts",
                        "insertPcr": false,
                        "duration": 10
                    },
                    "playlist": {
                        "indexName": "index.m3u8",
                        "version": 3,
                        "alternates": false,
                        "sequence": 0,
                        "alternatesName": "playlist.m3u8"
                    }
                }
            }
        },
        "operations": {
            "stats": {
                "level": {
                    "depth": 0,
                    "accumulate": false
                },
                "https": {
                    "seperate": false
                },
                "loopback": {
                    "passive": false,
                    "active": false
                }
            },
            "log": {
                "meta": {
                    "dir": "/ston_log"
                },
                "access": {
                    "enable": true,
                    "rolling": {
                        "time": 1440
                    },
                    "retention": 10,
                    "xff": "all",
                    "form": "m2",
                    "loopback": false,
                    "compression": false
                },
                "origin": {
                    "enable": true,
                    "rolling": {
                        "time": 1440
                    },
                    "retention": 10,
                    "loopback": false,
                    "compression": false
                },
                "monitoring": {
                    "enable": true,
                    "rolling": {
                        "size": 10
                    },
                    "retention": 10,
                    "form": "json"
                },
                "dims": {
                    "enable": true,
                    "rolling": {
                        "time": 1440
                    },
                    "retention": 10,
                    "compression": false
                }
            }
        }
    },
    "hosting": [
        {
            "name": "qa.winesoft.co.kr",
            "https": [
                {
                    "options": {
                        "enableSsl30": false,
                        "enableTls10": true,
                        "enableTls11": true,
                        "enableTls12": true
                    }
                }
            ],
            "enable": true,
            "origin": {
                "protocol": "HTTP",
                "address": [
                    "192.168.0.86"
                ]
            },
            "listen": "*:80",
            "functions": {
                "contents": {
                    "dvtrim": {
                        "upfrontHeader": {
                            "mp4": true,
                            "m4a": true
                        },
                        "trimming": {
                            "mp4": {
                                "enable": true,
                                "allTracks": true
                            },
                            "m4a": {
                                "enable": true
                            },
                            "mp3": {
                                "trimming": {
                                    "enable": true
                                }
                            }
                        }
                    },
                    "dvhls": {
                        "mp4": {
                            "run": {
                                "enable": true
                            }
                        },
                        "mp3": {
                            "meta": {
                                "enable": true,
                                "segmentType": "mp3"
                            }
                        }
                    },
                    "dims": {
                        "meta": {
                            "enable": true,
                            "keyword": "dims"
                        },
                        "quality": {
                            "max": 99,
                            "format": 99
                        },
                        "composite": [
                            {
                                "name": "composite_nw",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "nw",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "name": "composite_n",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "n",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "name": "composite_ne",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "ne",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "name": "composite_w",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "w",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "name": "composite_c",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "c",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "name": "composite_e",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "e",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "name": "composite_sw",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "sw",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "name": "composite_s",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "s",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "name": "composite_se",
                                "file": "/usr/local/m2/rt/winesoft.png",
                                "gravity": "se",
                                "geometry": "+0+0",
                                "dissolve": 50
                            }
                        ],
                        "annotation": [
                            {
                                "value": "WineSOFT",
                                "name": "annotation_nw",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "nw",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "value": "WineSOFT",
                                "name": "annotation_n",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "n",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "value": "WineSOFT",
                                "name": "annotation_ne",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "ne",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "value": "WineSOFT",
                                "name": "annotation_w",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "w",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "value": "WineSOFT",
                                "name": "annotation_c",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "c",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "value": "WineSOFT",
                                "name": "annotation_e",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "e",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "value": "WineSOFT",
                                "name": "annotation_sw",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "sw",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "value": "WineSOFT",
                                "name": "annotation_s",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "s",
                                "geometry": "+0+0",
                                "dissolve": 50
                            },
                            {
                                "value": "WineSOFT",
                                "name": "annotation_se",
                                "font": "NanumGothic-Bold.ttf",
                                "fontSize": 50,
                                "fontColor": "#000000",
                                "textAlign": "center",
                                "backgroundWidth": 0,
                                "backgroundHeight": 0,
                                "backgroundColor": "#FFFFFF",
                                "gravity": "se",
                                "geometry": "+0+0",
                                "dissolve": 50
                            }
                        ]
                    }
                },
                "network": {
                    "cache": {
                        "ttl": {
                            "resCode": {
                                "noCache": {
                                    "max": 0
                                },
                                "res2xx": {
                                    "sec": 30,
                                    "ratio": 0,
                                    "max": 0
                                },
                                "res3xx": {
                                    "sec": 30
                                }
                            }
                        }
                    },
                    "http": {
                        "frontEnd": {
                            "headers": {
                                "modify": {
                                    "enable": true,
                                    "matchingList": [
                                        {
                                            "pattern": "$URL[*]",
                                            "header": "    $RES[x-m2-cache-result:#CACHEHIT]"
                                        }
                                    ]
                                }
                            },
                            "accessControl": {
                                "enable": true
                            }
                        }
                    }
                }
            },
            "urlRewrites": [
                {
                    "accessLogUrl": "Replace",
                    "pattern": "(.*)/(.*)/code/(.*)",
                    "replace": "status-code.winesoft.co.kr/chain/dev-status?status=#311"
                },
                {
                    "accessLogUrl": "Replace",
                    "pattern": "(.*)/(.*)/code/(.*)",
                    "replace": "status-code.winesoft.co.kr/chain/dev-status?status=#322"
                },
                {
                    "accessLogUrl": "Replace",
                    "pattern": "(.*)/(.*)/code/(.*)",
                    "replace": "status-code.winesoft.co.kr/chain/dev-status?status=#333"
                },
                {
                    "accessLogUrl": "Replace",
                    "pattern": "(.*)/(.*)/code/(.*)",
                    "replace": "status-code.winesoft.co.kr/chain/dev-status?status=#344"
                }
            ]
        },
        {
            "name": "status-code.winesoft.co.kr",
            "enable": true,
            "origin": {
                "protocol": "HTTP",
                "address": [
                    "m2.winesoft.co.kr:8585"
                ]
            },
            "listen": "*:80"
        }
    ]
}
